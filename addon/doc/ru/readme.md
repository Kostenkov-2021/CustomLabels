# Custom Labels (Пользовательские метки)

* Автор: Kefas Lungu

Примечание: для работы этого дополнения требуется NVDA 2025.1 или более поздняя версия.

## Обзор

Custom Labels — это дополнение для NVDA, которое позволяет добавлять пользовательские метки для неподписанных элементов управления, а также редактировать существующие. Это особенно полезно для приложений, в которых кнопки или элементы управления не имеют текстовых меток или NVDA не может их правильно определить.

## Возможности

* Назначение пользовательских меток неподписанным элементам управления
* Редактирование существующих пользовательских меток
* Удаление пользовательских меток, если они больше не нужны
* Управление всеми метками в настройках дополнения
* Метки хранятся отдельно для каждого приложения для лучшей организации, а также для последующего экспорта и импорта с целью обмена

## Поддерживаемые типы элементов управления

Метки можно назначать следующим типам элементов управления:

* Кнопки (Buttons)
* Кнопки меню (Menu buttons)
* Кнопки переключатели (Toggle buttons)
* Флажки (Checkboxes)
* Радиокнопки) (Radio buttons)
* Комбинированные списки (Combo boxes)
* Ползунки (Sliders)
* Вкладки (Tabs)
* Пункты меню (Menu items)
* Поля редактирования (Editable text)

## Сочитания клавиш

* NVDA+Control+L: Установить или изменить пользовательскую метку для текущего элемента управления
* NVDA+Control+Delete: Удалить пользовательскую метку текущего элемента управления
* NVDA+Control+J: Проверить, есть ли у текущего элемента управления пользовательская метка
* NVDA+Control+; (точка с запятой): Открыть настройки пользовательских меток

## Использование

### Установка пользовательской метки

1. Установите фокус на элемент управления, который вы хотите подписать.
2. Нажмите NVDA+Control+L.
3. Появится диалог с информацией об элементе управления.
4. Введите желаемую метку в текстовое поле.
5. Нажмите OK, чтобы сохранить метку.

### Редактирование существующей метки

1. Установите фокус на элемент управления, для которого уже установлена пользовательская метка.
2. Нажмите комбинацию клавиш NVDA+Control+L.
3. Измените текст метки в текстовом поле.
4. Нажмите OK, чтобы сохранить изменения.

### Удаление метки

Удалить метку можно двумя способами:

1. Установите фокус на элемент управления и нажмите NVDA+Control+Delete.
2. Или откройте диалог редактирования метки (NVDA+Control+L) и нажмите кнопку "Удалить".

### Управление всеми метками

1. Нажмите NVDA+Control+;, чтобы открыть настройки .
2. Просмотрите метки, сгруппированные по приложениям.
3. Используйте кнопки "Изменить", "Удалить", "Удалить приложение" или "Удалить все" по мере необходимости.

## Настройки дополнения

Настройки дополнения Custom Labels можно открыть следующими способами:

* С помощью сочетания клавиш NVDA+Control+;
* Через меню NVDA > Параметры > Настройки > Custom Labels

Панель отображает все пользовательские метки, организованные в виде дерева по приложениям. Вы можете:

* **Изменить**: Отредактировать выбранную метку.
* **Удалить**: Удалить выбранную метку.
* **Удалить приложение**: Удалить все метки для выбранного приложения.
* **Удалить все**: Удалить все пользовательские метки.

## Хранение данных

Метки хранятся в файлах JSON в каталоге конфигурациии пользователя NVDA, в папке `customLabels`. Для каждого приложения создаётся отдельный файл JSON, что упрощает резервное копирование или обмен метками для конкретных приложений.

## Известные ограничения

* **Веб-приложения в режиме обзора:** Для приложений, созданных с использованием веб-технологий (таких как новая версия Outlook, Slack, TeamViewer и другие приложения на базе Electron или WebView2), пользовательские метки работают только в режиме редактирования. Нажмите **NVDA+Пробел**, чтобы переключиться в режим редактирования перед использованием пользовательских меток в этих приложениях. Это связано с тем, как NVDA обрабатывает режим обзора, используя виртуальный буфер, который не использует те же интерактивные объекты, на которые полагается дополнение Custom Labels.
* **Элементы управления с идентичными свойствами:** Если в приложении есть несколько элементов управления одного типа с одинаковым именем (или без имени), иногда дополнение не может их различить. В таком случае присвоение метки одному из них приведёт к присвоению той же метки всем подходящим элементам управления. На практике это встречается редко, так как большинство приложений назначают элементам управления уникальные идентификаторы.

## Благодарности

* [Leonardo Marenda (@LeonardoMarenda)](https://github.com/LeonardoMarenda): Добавил итальянский перевод. ([#1](https://github.com/kefaslungu/CustomLabels/pull/1))
* [Kostenkov-2021 (@Kostenkov-2021)](https://github.com/Kostenkov-2021): Добавил русский перевод (README и локализация). ([#3](https://github.com/kefaslungu/CustomLabels/pull/3))
* Umut KORKMAZ (umutkork@gmail.com): Добавил турецкий перевод.
* [George-br (@George-br)](https://github.com/George-br): Добавил украинский перевод. ([#6](https://github.com/kefaslungu/CustomLabels/pull/6))

## История изменений

### Версия 2026.1

* Добавлены переводы на русский, турецкий и украинский языки.
* Улучшена идентификация элементов управления с использованием их оригинальных имен.
* Исправлена проблема, из-за которой метки не работали в веб-приложениях (Electron, WebView2).
* Исправлена ошибка, из-за которой в некоторых приложениях одна и та же метка присваивалась всем кнопкам.
* Добавлена поддержка присвоения меток полям редактирования.
* Добавлен раздел с описанием известных ограничений.

### Версия 2026.0

* Первоначальный выпуск